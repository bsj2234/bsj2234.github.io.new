---
layout: default
---
<main class="content fade-in-down delay-0_75s">
    <div class="inner">
        <article class="post single-portfolio-item">
            {% if page.image %}
            <div class="portfolio-image-container">
                <img src="{{ page.image | prepend: site.baseurl }}" alt="{{ page.title }}" class="portfolio-image">
            </div>
            {% endif %}
            <div class="entry-box">
                <header class="entry-header">
                    <h1 class="entry-title">{{ page.title }}</h1>
                    <div class="entry-meta">
                        <p>게임 유형: {{ page.game_type }}</p>
                        <p>프로젝트 유형: {{ page.project_type }}</p>
                        <p>주요 포커스: {{ page.focus }}</p>
                    </div>
                </header>
                <div class="entry-content">
                    {{ content }}
                </div>
            </div>
        </article>
    </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', (event) => {
    const toc = document.getElementById('toc');
    if (toc) {
        const isMobile = () => window.innerWidth <= 768;

        function updateTocPosition() {
            if (!isMobile()) {
                const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
                const headerHeight = 60; // 헤더의 높이, 필요에 따라 조정하세요
                const topMargin = 20; // 상단 여백
                const windowHeight = window.innerHeight;
                const tocHeight = toc.offsetHeight;
                const maxTop = document.body.offsetHeight - tocHeight - topMargin;

                // 스크롤 위치에서 상단 여백을 뺀 값을 사용합니다
                let topPosition = Math.max(topMargin, headerHeight + scrollPosition - topMargin);
                topPosition = Math.min(topPosition, maxTop);

                toc.style.position = 'fixed';
                toc.style.top = `${topPosition}px`;
            } else {
                toc.style.position = 'static';
                toc.style.top = 'auto';
            }
        }

        function toggleTocVisibility() {
            if (isMobile()) {
                let tocToggle = document.getElementById('toc-toggle');
                if (!tocToggle) {
                    tocToggle = document.createElement('button');
                    tocToggle.innerText = '목차';
                    tocToggle.id = 'toc-toggle';
                    document.body.appendChild(tocToggle);
                    tocToggle.addEventListener('click', () => {
                        toc.style.display = toc.style.display === 'none' ? 'block' : 'none';
                    });
                }
                toc.style.display = 'none';
            } else {
                const existingToggle = document.getElementById('toc-toggle');
                if (existingToggle) {
                    existingToggle.remove();
                }
                toc.style.display = 'block';
            }
        }

        updateTocPosition();
        toggleTocVisibility();

        window.addEventListener('scroll', updateTocPosition);
        window.addEventListener('resize', () => {
            updateTocPosition();
            toggleTocVisibility();
        });

        // 목차 링크 클릭 이벤트 처리
        toc.addEventListener('click', function(e) {
            if (e.target.tagName === 'A') {
                e.preventDefault();
                const targetId = e.target.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    const offset = 100; // 원하는 오프셋 값으로 조정하세요
                    const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        });
    }
});
</script>
